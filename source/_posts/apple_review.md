---
title: "[iOS]聊一聊苹果审核"
catalog: true
toc_nav_num: true
date: 2018-12-18 10:51:24
subtitle: "Talk-about-apple-review."
header-img: "/img/article_header/article_header1.png"
tags:
- iOS
catagories:
- iOS

---

做了三年多的iOS开发，经历过多款app的提审历程，被苹果审核全身心的调教过。尤其是今年，被拒审至怀疑人生。现将一些奇葩的拒审经历和一些简单的应对措施整理整理，给大家一些参考。

首先，还是建议大家仔细阅读下官方[App Store 审核指南](https://developer.apple.com/cn/app-store/review/guidelines/)，最好是邀请你们的产品经理也仔细读下，很多规则是从功能和设计上需要遵循的，下面案例里面有介绍到。

### 一、拒审case

#### 1、app预览和屏幕快照不合格

正常情况，预览图片尺寸不对这样的低级问题是在上传的时候就能够检测到，直接能够看到错误。

我们遇到过一次被坑到没商量的情况：**5.5英寸的预览图里设计画了一个明显的iPhone X手机屏。**当时还特地好几个人仔细的研究了下预览图，以为是隐藏功能被画出来了（当然这是另外一个拒审理由）。
直到第二次被打回来才意识到苹果强调的预览图设计规范，这才找的拒审的真正原因。

这里不得不吐槽下，**拒审的理由真的是晦涩难懂。**

#### 2、定位的权限描述不够清晰问题

这个应该比较常见了。定位权限有两种"when-in-use" 和 "always"两种，后者相对审核较为严格一些（至于如何设置相关的可以自行百度，这里不赘述了）。

最初我们描述为”为了给您提供更好的服务，我们需要获取您的定位权限“之类的。第一次审核过了，之后的某次审核突然就被拒了，苹果爸爸以王者之姿审问我们，"always"权限具体是做啥用的，问的我们是措手不及。后来没办法，找产品经理好好的想了下我们定位使用的场景，把描述改为”该信息将用于XXX功能“。

这里有个常见case，之前过审了的功能突然被拒了。所以，**苹果爸爸的心情不好猜。**

#### 3、动态修改桌面icon问题

Guideline 4.6 Design - Alternate App Icons

iOS 10.3之后，苹果官方提供了可以动态修改桌面icon相关的API。有一次赶上中国情人节，突然我们想上一下这个功能。（ 具体功能参考下[UIApplication (UIAlternateApplicationIcons)相关API](https://developer.apple.com/documentation/uikit/uiapplication/2806815-supportsalternateicons?language=objc) ）

功能是图标需要提前内置在包里，服务下发名称触发客户端更改桌面图标。切换图标的时候有个弹窗，当时为了去掉这个弹窗，让用户回到桌面有个惊喜，特地用分类干掉了那个弹窗。

节日期间正常使用，皆大欢喜。之后的版本还想着跟着节日走，就一直没下。

结果后来有一天，突然被拒审，理由是发现我们可以动态更换icon，应用内没有地方能触发。只好将其删除重新提审。

这里需要重视一下的是，这种情况**应该在审核备注里和苹果详细解释下这样的功能使用场景**，否则很有可能被当成隐藏功能处理。在[App Store 审核指南](https://developer.apple.com/cn/app-store/review/guidelines/)有详细说明，隐藏功能后果是很严重的。

#### 4、未安装微信弹提示

Guideline 4.2.3 - Design - Minimum Functionality

使用了微信登录功能，审核员的iPad没安装微信。这种case，作为程序员，当然是处理成没安装报错给个提示好了。结果被拒理由是引导安装第三方应用。

这一次，审核员还是比较贴心，建议我们最好弹出一个html去授权安装。

后来没安装直接给隐藏了按钮重提。

#### 5、监督用户内容

Guideline 1.2 - Safety - User Generated Content

这条case我们后来的理解是只要有用户产生的内容就要加上举报。

这也是我前面提到的需要产品经理认识到的一条规则。

#### 6、一些开关

Guideline 2.3.1 - Hidden or undocumented features

很多产品经理喜欢搞功能开关，这里涉及到一个隐藏功能的规则。这一条单独出现的情况，还真没见过。但是和其他条款一起出现，可就恐怖了。比如，Guideline 3.1.1 - In-App Purchase。

这个可是切身体会过。我们线上app的功能页面有明显的支付宝图标，长得也像支付，还做了功能开关。被苹果抽查到直接被下架，理由就是2.3.1和3.1.1，再怎么解释不是支付都没有用。下架之后提审直接进慢队列。

之后陷入了死亡被拒模式，被拒一次等两周，再被拒。加上审核被拒理由又不清楚只有违反条款，后来我们连服务接口都仔细审查了一遍，折腾了一个多月才搞上去。

这一次，是真的让我们意识到，和苹果爸爸千万不要陷入信任危机。后来的提审，**所有有可能隐藏的功能都要给审核打开，并且在备注里说明。**

#### 7、支付

Guideline 3.1.1 - In-App Purchase

**虚拟产品支付必须用苹果支付。** 这个应该是大忌，相信大家都有认识到。

#### 8、应用模式

Guideline 4.2 - Design - Minimum Functionality

这一条是同行朋友给我讲的，来自上帝视角的审视，“如果不按照苹果审核指南进行修改您的应用，您可能希望构建一个HTML5 web应用程序”。

```
If you cannot - or choose not to - revise your app to 
be in compliance with the App Store Review Guidelines, 
you may wish to build an HTML5 web app instead. 
You can distribute web apps directly on your web site; 
the App Store does not accept or distribute web apps.
```

这一条堪称绝杀，办法只能寄于说好话和修改应用模式了。

### 二、常见的审核措施

#### 1、预审方案

国内有不少苹果应用的预审平台，比如[WeTest](https://wetest.qq.com/product/ios)等等，淘宝也有些提供预审服务的商家。可以作为一种预审方案，但是不推荐。某些专家有些时候还不如一个正儿八经的开发。

这里可以介绍一个免费又好用的预审方案：TestFlight公开链接，苹果官方的功能。在应用提审的前几天可以提交一个TestFlight公开链接的构建版本，每个版本的第一个包需要审核，排队少反馈快，第一个包过审之后再次提包不需要审核。可以对外发布10000+测试安装，比起企业账号更加好用些。不少应用的内测邀请就是使用的TestFlight公开链接这个功能。

#### 2、拒审沟通

拒审之后可以回复邮件再次提包，可以申诉，还可以打电话。苹果审核的电话是[001(408)862-7273]()。这里是美国电话，国内手机拨打需要开通国际漫游服务。可以下载一个Skype，19块钱买一个美国包月服务。

选择邮件回复的同学，千万要耐心。苹果审核不会故意刁难，查到最后都能找到根源，只是有时候沟通上不好理解。


以上就是一些苹果提审的经验。不是很全，但都是亲身经历。有共鸣的同学欢迎指正。